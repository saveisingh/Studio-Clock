(function(m){function f(a,c){for(var d=a.sections,b=0;b<d.length;b++){var g=d[b];if(g.name==c)return g}}function h(a,c){for(var d=a.options,b=0;b<d.length;b++){var g=d[b];if(g.name==c)return g}}var n={name:"ConfigIniParser Error",message:"Parse config ini file error"},k={name:"ConfigIniParser Error",message:"The specify section not found"},p={name:"ConfigIniParser Error",message:"The specify option not found"},l={name:"ConfigIniParser Error",message:"Found duplicated section in the given ini file"},
q=/\s*\[\s*(\S+)\s*\]\s*/,r=/\s*(\S+)\s*[=:]\s*(.*)\s*/,t=/\s*[#;].*/,u=/^\s*$/,e=function(a){this.delimiter=a?a:"\n";this._ini={sections:[]};this._ini.sections.push({name:"__DEFAULT_SECTION__",options:[]})};e.prototype.addSection=function(a){if(f(this._ini,a))throw l;this._ini.sections.push({name:a,options:[]});return this};e.prototype.get=function(a,c,d){if(a=f(this._ini,a?a:"__DEFAULT_SECTION__"))if(c=h(a,c))return c.value;if(d)return d;throw p;};e.prototype.getBoolean=function(a,c){var d=this.get(a?
a:"__DEFAULT_SECTION__",c);return isNaN(d)?"true"==String(d).toLowerCase():0!=d};e.prototype.getNumber=function(a,c){return+this.get(a?a:"__DEFAULT_SECTION__",c)};e.prototype.isHaveSection=function(a){return!!f(this._ini,a)};e.prototype.isHaveOption=function(a,c){var d=f(this._ini,a?a:"__DEFAULT_SECTION__");return d&&h(d,c)?!0:!1};e.prototype.items=function(a){a=f(this._ini,a?a:"__DEFAULT_SECTION__");for(var c=[],d=0;d<a.options.length;d++){var b=a.options[d];c.push([b.name,b.value])}return c};e.prototype.options=
function(a){var c=f(this._ini,a?a:"__DEFAULT_SECTION__");if(c){a=[];for(var c=c.options,d,b=0;b<c.length;b++)d=c[b],a.push(d.name);return a}throw k;};e.prototype.removeOption=function(a,c){var d=f(this._ini,a?a:"__DEFAULT_SECTION__");if(d){var b;a:{b=d.options;for(var g=0;g<b.length;g++)if(b[g].name==c){b=g;break a}b=-1}if(-1!=b)return d.options.splice(b,1),!0}return!1};e.prototype.removeSection=function(a){a:{for(var c=this._ini.sections,d=0;d<c.length;d++)if(c[d].name==a){a=d;break a}a=-1}return-1!=
a?(this._ini.sections.splice(a,1),!0):!1};e.prototype.sections=function(){for(var a=[],c=this._ini.sections,d,b=0;b<c.length;b++)d=c[b],"__DEFAULT_SECTION__"!=d.name&&a.push(d.name);return a};e.prototype.set=function(a,c,d){a=f(this._ini,a?a:"__DEFAULT_SECTION__");var b;if(a)return(b=h(a,c))?b.value=d:(b={name:c,value:d},a.options.push(b)),this;throw k;};e.prototype.stringify=function(a){for(var c=[],d=this._ini.sections,b,g,e=0;e<d.length;e++){b=d[e];"__DEFAULT_SECTION__"!=b.name&&c.push("["+b.name+
"]");b=b.options;for(var f=0;f<b.length;f++)g=b[f],c.push(g.name+"="+g.value);c.push("")}return c.join(a?a:this.delimiter)};e.prototype.parse=function(a){a=a.split(this.delimiter);for(var c=f(this._ini,"__DEFAULT_SECTION__"),d=0;d<a.length;d++){var b=a[d];if(!b.match(t)&&!b.match(u)){var e=b.match(q);if(e){c=e[1];if(f(this._ini,c))throw l;c={name:c,options:[]};this._ini.sections.push(c)}else if(b=b.match(r))c.options.push({name:b[1],value:b[2]});else throw n;}}return this};m.ConfigIniParser=e})("undefined"!=
typeof exports?exports:"undefined"!=typeof window?window:{});
